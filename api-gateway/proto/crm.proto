syntax = "proto3";

package crm;

option go_package = "erp-api-gateway/proto/gen/crm";

import "google/protobuf/timestamp.proto";

// CRMService defines the CRM service
service CRMService {
  rpc GetContacts(GetContactsRequest) returns (GetContactsResponse);
  rpc GetContact(GetContactRequest) returns (GetContactResponse);
  rpc CreateContact(CreateContactRequest) returns (CreateContactResponse);
  rpc UpdateContact(UpdateContactRequest) returns (UpdateContactResponse);
  rpc DeleteContact(DeleteContactRequest) returns (DeleteContactResponse);
}

// Get contacts request and response
message GetContactsRequest {
  int32 page = 1;
  int32 limit = 2;
  string search = 3;
  string sort_by = 4;
  string sort_order = 5;
}

message GetContactsResponse {
  bool success = 1;
  string message = 2;
  repeated Contact data = 3;
  PaginationMeta meta = 4;
  map<string, FieldErrors> errors = 5;
}

// Get contact request and response
message GetContactRequest {
  string contact_id = 1;
}

message GetContactResponse {
  bool success = 1;
  string message = 2;
  Contact data = 3;
  map<string, FieldErrors> errors = 4;
}

// Create contact request and response
message CreateContactRequest {
  string first_name = 1;
  string last_name = 2;
  string email = 3;
  string phone = 4;
  string company = 5;
}

message CreateContactResponse {
  bool success = 1;
  string message = 2;
  Contact data = 3;
  map<string, FieldErrors> errors = 4;
}

// Update contact request and response
message UpdateContactRequest {
  string contact_id = 1;
  string first_name = 2;
  string last_name = 3;
  string email = 4;
  string phone = 5;
  string company = 6;
}

message UpdateContactResponse {
  bool success = 1;
  string message = 2;
  Contact data = 3;
  map<string, FieldErrors> errors = 4;
}

// Delete contact request and response
message DeleteContactRequest {
  string contact_id = 1;
}

message DeleteContactResponse {
  bool success = 1;
  string message = 2;
}

// Data structures
message Contact {
  string id = 1;
  string first_name = 2;
  string last_name = 3;
  string email = 4;
  string phone = 5;
  string company = 6;
  google.protobuf.Timestamp created_at = 7;
  google.protobuf.Timestamp updated_at = 8;
}

message PaginationMeta {
  int32 current_page = 1;
  int32 per_page = 2;
  int32 total = 3;
  int32 last_page = 4;
}

message FieldErrors {
  repeated string errors = 1;
}