syntax = "proto3";

package hrm;

option go_package = "erp-api-gateway/proto/gen/hrm";

import "google/protobuf/timestamp.proto";

// HRMService defines the HRM service
service HRMService {
  rpc GetEmployees(GetEmployeesRequest) returns (GetEmployeesResponse);
  rpc GetEmployee(GetEmployeeRequest) returns (GetEmployeeResponse);
  rpc CreateEmployee(CreateEmployeeRequest) returns (CreateEmployeeResponse);
  rpc UpdateEmployee(UpdateEmployeeRequest) returns (UpdateEmployeeResponse);
  rpc DeleteEmployee(DeleteEmployeeRequest) returns (DeleteEmployeeResponse);
}

// Get employees request and response
message GetEmployeesRequest {
  int32 page = 1;
  int32 limit = 2;
  string search = 3;
  string department = 4;
}

message GetEmployeesResponse {
  bool success = 1;
  string message = 2;
  repeated Employee data = 3;
  PaginationMeta meta = 4;
  map<string, FieldErrors> errors = 5;
}

// Get employee request and response
message GetEmployeeRequest {
  string employee_id = 1;
}

message GetEmployeeResponse {
  bool success = 1;
  string message = 2;
  Employee data = 3;
  map<string, FieldErrors> errors = 4;
}

// Create employee request and response
message CreateEmployeeRequest {
  string first_name = 1;
  string last_name = 2;
  string email = 3;
  string department = 4;
  string position = 5;
}

message CreateEmployeeResponse {
  bool success = 1;
  string message = 2;
  Employee data = 3;
  map<string, FieldErrors> errors = 4;
}

// Update employee request and response
message UpdateEmployeeRequest {
  string employee_id = 1;
  string first_name = 2;
  string last_name = 3;
  string email = 4;
  string department = 5;
  string position = 6;
}

message UpdateEmployeeResponse {
  bool success = 1;
  string message = 2;
  Employee data = 3;
  map<string, FieldErrors> errors = 4;
}

// Delete employee request and response
message DeleteEmployeeRequest {
  string employee_id = 1;
}

message DeleteEmployeeResponse {
  bool success = 1;
  string message = 2;
}

// Data structures
message Employee {
  string id = 1;
  string first_name = 2;
  string last_name = 3;
  string email = 4;
  string department = 5;
  string position = 6;
  google.protobuf.Timestamp created_at = 7;
  google.protobuf.Timestamp updated_at = 8;
}

message PaginationMeta {
  int32 current_page = 1;
  int32 per_page = 2;
  int32 total = 3;
  int32 last_page = 4;
}

message FieldErrors {
  repeated string errors = 1;
}